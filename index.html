<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>ã‚Šã‚Šã¯ã¡ã‚¿ã‚¤ãƒ  ğŸŒ´</title>
<style>
 body{font-family:"Hiragino Kaku Gothic ProN",sans-serif;margin:0;padding:2rem;text-align:center;transition:background-color .8s}
 body.work{background:linear-gradient(#e0f7f6,#c8f4e0);color:#333}
 body.break{background:linear-gradient(#d0eaff,#a0d2f6);color:#003366}
 h1{font-size:2rem;margin:.5rem 0}
 p.subtitle{margin:0 0 1rem;font-size:1rem}
 .description{max-width:600px;margin:0 auto 2rem;text-align:left;font-size:.95rem;background:#ffffffcc;padding:1rem;border-radius:1rem}
 #timer{font-size:4rem;margin:1rem 0}
 #message{font-size:1.2rem;font-weight:bold;min-height:1.5em;margin-bottom:1rem}
 button,select{font-size:1.2rem;padding:.6rem 1.2rem;margin:.5rem;border:none;background:#b2dfdb;color:#004d40;border-radius:1rem;cursor:pointer;transition:background-color .3s}
 button:hover,select:hover{background:#80cbc4}
 #playerWrap{width:100%;max-width:560px;height:315px;margin-top:2rem;border-radius:1rem;overflow:hidden}
 .footer{margin-top:2rem;font-size:.9rem}
 .footer a{color:inherit;text-decoration:none}
 .footer a:hover{text-decoration:underline}
</style>
</head>
<body class="work">
<h1>ã‚Šã‚Šã¯ã¡ã‚¿ã‚¤ãƒ  ğŸŒ´</h1>
<p class="subtitle">ç™’ã—ã®éŸ³æ¥½ã§ã€ã‚‚ãã‚‚ãé›†ä¸­ğŸï¸</p>

<div class="description">
<strong>ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ãƒ»ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã¨ã¯ï¼Ÿ</strong><br>
25 åˆ†é›†ä¸­ï¼‹5 åˆ†ä¼‘æ†©ã‚’ç¹°ã‚Šè¿”ã™ã€ã‚·ãƒ³ãƒ—ãƒ«ãªæ™‚é–“ç®¡ç†æ³•ã§ã™ã€‚<br>
é›†ä¸­ã‚¿ã‚¤ãƒãƒ¼ã¨ç™’ã—ã® BGM ã§ä½œæ¥­ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ğŸŒº
</div>

<label for="musicSelect">ğŸ¶ æ›²ã‚’é¸ã¶ï¼š</label>
<select id="musicSelect" onchange="changeVideo(this.value)">
  <option value="xvcXZbvYf0s">ğŸš ä½œæ¥­ç”¨BGM1</option>
  <option value="W0lUBVcvJiw">ğŸš ä½œæ¥­ç”¨BGM2</option>
  <option value="nlzxWWjB-ik">ğŸš ä½œæ¥­ç”¨BGM3</option>
  <option value="Fdp4u_SUjKE">ğŸš ä½œæ¥­ç”¨BGM4</option>
  <option value="o-wCYm_Pm6A">ğŸš ä½œæ¥­ç”¨BGM5</option>
  <option value="EuEzwLm1rVg">ğŸš ä½œæ¥­ç”¨BGM6</option>
  <option value="rWyX16RTMgk">ğŸš ä½œæ¥­ç”¨BGM7</option>
</select>

<div id="timer">25:00</div>
<div id="message"></div>

<button onclick="startLoop()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
<button onclick="resetLoop()">ãƒªã‚»ãƒƒãƒˆ</button>

<div id="playerWrap">
  <!-- YouTube API ãŒå¾Œã‹ã‚‰ iframe ã‚’ç”Ÿæˆã—ã¦æŒ¿å…¥ -->
  <div id="player"></div>
</div>

<div class="footer">
 ğŸŒˆ BGM æä¾›ï¼š<a href="https://youtube.com/@riri8bgm?si=FUPbTFrBd1rW2a1d" target="_blank">ã‚Šã‚Šã¯ã¡BGM ãƒãƒ£ãƒ³ãƒãƒ«</a>
</div>

<script>
let timer,time=1500,running=false,isWork=true;
let player,currentVideoId="xvcXZbvYf0s";

function updateDisplay(){
  const m=Math.floor(time/60),s=time%60;
  document.getElementById("timer").textContent=`${m.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;
}

function startLoop(){
  if(running)return;
  running=true;isWork=true;startPhase();
}

function startPhase(){
  clearInterval(timer);
  document.body.className=isWork?"work":"break";
  time=isWork?1500:300; // 25min / 5min
  updateDisplay();
  document.getElementById("message").textContent=isWork?
    "ğŸŒº é›†ä¸­ã‚¿ã‚¤ãƒ é–‹å§‹ï¼æ¬¡ã¯5åˆ†é–“ã®ä¼‘æ†©ã§ã™ ğŸï¸":
    "ğŸ–ï¸ ä¼‘æ†©ã‚¹ã‚¿ãƒ¼ãƒˆï¼æ¬¡ã¯25åˆ†ã®ä½œæ¥­ã‚¿ã‚¤ãƒ ã§ã™ ğŸŒŠ";

  if(isWork){player.playVideo();}else{player.pauseVideo();}
  timer=setInterval(()=>{
    if(time>0){time--;updateDisplay();}
    else{isWork=!isWork;startPhase();} // è‡ªå‹•åˆ‡æ›¿
  },1000);
}

function resetLoop(){
  clearInterval(timer);time=1500;running=false;isWork=true;
  updateDisplay();player.pauseVideo();
  document.body.className="work";document.getElementById("message").textContent="";
}

function changeVideo(videoId){
  currentVideoId=videoId;
  if(player){
    player.setLoop(true);
    if(running&&isWork){
      // ä½œæ¥­ä¸­ãªã‚‰å³å†ç”Ÿ
      player.loadPlaylist({playlist:[videoId],index:0});
    }else{
      // ä¼‘æ†©ä¸­ or åœæ­¢ä¸­ã¯ã‚­ãƒ¥ãƒ¼ã®ã¿
      player.cuePlaylist({playlist:[videoId],index:0});
    }
  }
}

function onYouTubeIframeAPIReady(){
  player=new YT.Player("player",{
    videoId:currentVideoId,
    playerVars:{loop:1,playlist:currentVideoId},
    events:{onReady:(e)=>{e.target.pauseVideo();}}
  });
}

const tag=document.createElement("script");
tag.src="https://www.youtube.com/iframe_api";
document.body.appendChild(tag);

updateDisplay();
</script>
</body>
</html>
